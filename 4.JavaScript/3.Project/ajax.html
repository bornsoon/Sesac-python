<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>귀여운 강아지</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
</head>
<body>
    <div class="card" style="width: 40rem;">
        <div class="card-body">
            <h3>귀여운 강아지를 보세요!!</h3>
            <img id="dog_img" src="https:/\/images.dog.ceo\/breeds\/terrier-yorkshire\/n02094433_2643.jpg" alt="강아지 랜덤 이미지"><br>
            <button type="button" class="btn btn-primary" onclick="changeImage()">사진 추가</button><br>
        </div>
    </div>
</body>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
<script>
    // const requestDogImage = async() => {       // await 빼면 ... 비동기(promise)
    //     const response = await fetch("https://dog.ceo/api/breeds/image/random");
    //     // console.log(response);
    //     const jsonData = await response.json();       // 제이슨 형식으로 포맷 변환해주는 코드
    //     // console.log(jsonData);
    //     const dogElement = document.getElementById("dog_img");       // 객체 가져오기
    //     dogElement.setAttribute("src", jsonData.message);            // 속성 src를 변경해주는 코드
    // }
    // const requestDogImage = async() => {     // await 넣으면 기다려줘서 순서대로 실행
    //     const response = await fetch("https://dog.ceo/api/breeds/image/random");
    //     console.log(response);
    //     const jsonData = await response.json();
    //     console.log(jsonData);
    // }
    // const changeImage = async () => {
    //     requestDogImage();
    // }

    const ajaxRequestDogImage = async() => {     // 클린 코드 single responsibility 단일 책임.. 하나의 함수는 하나의 역할만 한다.
        const response = await fetch("https://dog.ceo/api/breeds/image/random");
        const jsonData = await response.json();

        return jsonData.message;
    }

    function addElement(src) {
        const img = document.createElement("img");
        document.body.appendChild(img);
        img.setAttribute("src",src)
    }

    function changeDom(src) {
        const dom = document.getElementById("dog_img");
        dom.setAttribute("src", src);
    }

    function changeImage() {
        ajaxRequestDogImage().then((it) => {
        changeDom(it);
        addElement(it);
    });
    }
</script>
</html>